# Helm Charts Monorepo

This repository hosts multiple Helm charts under a single monorepo. Use it to develop, lint, test, and release charts consistently.

## Structure

- `charts/`: Each subfolder is a standalone chart.
  - `charts/example-app`: Example web application chart
  - `charts/example-worker`: Example worker/service chart
- `.ct.yaml`: chart-testing configuration
- `.github/workflows/`: CI workflows for linting/testing and releases
- `Makefile`: Common local tasks (lint, package, etc.)

## Prerequisites

- Helm v3 (`helm version`)
- Optional (for CI/local):
  - chart-testing (`ct`) for linting and e2e install tests
  - helm-docs (if you want autogenerated docs)

## Common Tasks

- Lint all charts: `make lint`
- Package all charts to `dist/`: `make package`
- Generate `index.yaml` from packaged charts:
  - With absolute URLs (recommended for GitHub Pages): `make index REPO_URL=https://<org>.github.io/<repo>`
  - Or with relative URLs: `make index`
- Clean build artifacts: `make clean`

## Adding a New Chart

1. Create a new directory under `charts/<your-chart>`.
2. Add a `Chart.yaml`, `values.yaml`, and `templates/` with manifests. You can copy one of the example charts as a starting point.
3. Update chart `name`, `description`, and versions in `Chart.yaml`.
4. Run `make lint` to validate and `make package` to build.

## Releasing (GitHub Pages + chart-releaser)

This repo includes a GitHub Actions workflow using `helm/chart-releaser-action` to publish charts to GitHub Pages. Create a `gh-pages` branch and enable Pages from that branch. Tag or create a GitHub Release and the workflow will package charts and update the `index.yaml` on `gh-pages`.

Adjust or remove the workflows if using a different CI/CD.
